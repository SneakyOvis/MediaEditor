var At=Object.defineProperty;var Et=(e,t,i)=>t in e?At(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var qe=(e,t,i)=>(Et(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const f of n)if(f.type==="childList")for(const a of f.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const f={};return n.integrity&&(f.integrity=n.integrity),n.referrerPolicy&&(f.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?f.credentials="include":n.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(n){if(n.ep)return;n.ep=!0;const f=i(n);fetch(n.href,f)}})();function j(){}function Tt(e,t){for(const i in t)e[i]=t[i];return e}function at(e){return e()}function Ge(){return Object.create(null)}function V(e){e.forEach(at)}function ct(e){return typeof e=="function"}function B(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Lt(e){return Object.keys(e).length===0}function Dt(e,...t){if(e==null){for(const o of t)o(void 0);return j}const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function U(e,t,i){e.$$.on_destroy.push(Dt(t,i))}function Mt(e,t,i,o){if(e){const n=_t(e,t,i,o);return e[0](n)}}function _t(e,t,i,o){return e[1]&&o?Tt(i.ctx.slice(),e[1](o(t))):i.ctx}function It(e,t,i,o){if(e[2]&&o){const n=e[2](o(i));if(t.dirty===void 0)return n;if(typeof n=="object"){const f=[],a=Math.max(t.dirty.length,n.length);for(let r=0;r<a;r+=1)f[r]=t.dirty[r]|n[r];return f}return t.dirty|n}return t.dirty}function jt(e,t,i,o,n,f){if(n){const a=_t(t,i,o,f);e.p(a,n)}}function Ft(e){if(e.ctx.length>32){const t=[],i=e.ctx.length/32;for(let o=0;o<i;o++)t[o]=-1;return t}return-1}function ve(e,t,i){return e.set(i),t}function $(e,t){e.appendChild(t)}function b(e,t,i){e.insertBefore(t,i||null)}function g(e){e.parentNode&&e.parentNode.removeChild(e)}function dt(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function v(e){return document.createElement(e)}function x(e){return document.createTextNode(e)}function N(){return x(" ")}function me(){return x("")}function M(e,t,i,o){return e.addEventListener(t,i,o),()=>e.removeEventListener(t,i,o)}function pt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function L(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function Bt(e){return Array.from(e.childNodes)}function ce(e,t){t=""+t,e.data!==t&&(e.data=t)}function ae(e,t){e.value=t??""}function _e(e,t,i,o){i==null?e.style.removeProperty(t):e.style.setProperty(t,i,o?"important":"")}function Qe(e,t,i){e.classList.toggle(t,!!i)}function he(e,t){return new e(t)}let pe;function de(e){pe=e}function mt(){if(!pe)throw new Error("Function called outside component initialization");return pe}function Wt(e){mt().$$.on_mount.push(e)}function Ht(e){mt().$$.on_destroy.push(e)}const re=[],O=[];let fe=[];const Se=[],Rt=Promise.resolve();let ze=!1;function Jt(){ze||(ze=!0,Rt.then(gt))}function Ce(e){fe.push(e)}function E(e){Se.push(e)}const Ne=new Set;let se=0;function gt(){if(se!==0)return;const e=pe;do{try{for(;se<re.length;){const t=re[se];se++,de(t),Vt(t.$$)}}catch(t){throw re.length=0,se=0,t}for(de(null),re.length=0,se=0;O.length;)O.pop()();for(let t=0;t<fe.length;t+=1){const i=fe[t];Ne.has(i)||(Ne.add(i),i())}fe.length=0}while(re.length);for(;Se.length;)Se.pop()();ze=!1,Ne.clear(),de(e)}function Vt(e){if(e.fragment!==null){e.update(),V(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ce)}}function Xt(e){const t=[],i=[];fe.forEach(o=>e.indexOf(o)===-1?t.push(o):i.push(o)),i.forEach(o=>o()),fe=t}const be=new Set;let K;function Q(){K={r:0,c:[],p:K}}function ee(){K.r||V(K.c),K=K.p}function h(e,t){e&&e.i&&(be.delete(e),e.i(t))}function y(e,t,i,o){if(e&&e.o){if(be.has(e))return;be.add(e),K.c.push(()=>{be.delete(e),o&&(i&&e.d(1),o())}),e.o(t)}else o&&o()}function $e(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function T(e,t,i){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=i,i(e.$$.ctx[o]))}function C(e){e&&e.c()}function S(e,t,i){const{fragment:o,after_update:n}=e.$$;o&&o.m(t,i),Ce(()=>{const f=e.$$.on_mount.map(at).filter(ct);e.$$.on_destroy?e.$$.on_destroy.push(...f):V(f),e.$$.on_mount=[]}),n.forEach(Ce)}function z(e,t){const i=e.$$;i.fragment!==null&&(Xt(i.after_update),V(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Yt(e,t){e.$$.dirty[0]===-1&&(re.push(e),Jt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function H(e,t,i,o,n,f,a,r=[-1]){const s=pe;de(e);const l=e.$$={fragment:null,ctx:[],props:f,update:j,not_equal:n,bound:Ge(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Ge(),dirty:r,skip_bound:!1,root:t.target||s.$$.root};a&&a(l.root);let u=!1;if(l.ctx=i?i(e,t.props||{},(c,m,...d)=>{const P=d.length?d[0]:m;return l.ctx&&n(l.ctx[c],l.ctx[c]=P)&&(!l.skip_bound&&l.bound[c]&&l.bound[c](P),u&&Yt(e,c)),m}):[],l.update(),u=!0,V(l.before_update),l.fragment=o?o(l.ctx):!1,t.target){if(t.hydrate){const c=Bt(t.target);l.fragment&&l.fragment.l(c),c.forEach(g)}else l.fragment&&l.fragment.c();t.intro&&h(e.$$.fragment),S(e,t.target,t.anchor),gt()}de(s)}class R{constructor(){qe(this,"$$");qe(this,"$$set")}$destroy(){z(this,1),this.$destroy=j}$on(t,i){if(!ct(i))return j;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(i),()=>{const n=o.indexOf(i);n!==-1&&o.splice(n,1)}}$set(t){this.$$set&&!Lt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Zt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Zt);const ue=[];function vt(e,t=j){let i;const o=new Set;function n(r){if(B(e,r)&&(e=r,i)){const s=!ue.length;for(const l of o)l[1](),ue.push(l,e);if(s){for(let l=0;l<ue.length;l+=2)ue[l][0](ue[l+1]);ue.length=0}}}function f(r){n(r(e))}function a(r,s=j){const l=[r,s];return o.add(l),o.size===1&&(i=t(n,f)||j),r(e),()=>{o.delete(l),o.size===0&&i&&(i(),i=null)}}return{set:n,update:f,subscribe:a}}const xt={name:"Default",modules:{Meta:{active:!0,settings:{clear:!0,location:"",camera:"",time:""}},Transform:{active:!1,settings:{mirror:!1,colors:"",blur:"",noise:"",zoom:"",pan:"",rotate:"",size:"",fps:"",split:""}},Note:{active:!1,settings:{}},Format:{active:!0,settings:{video:"mp4",photo:"jpeg"}}}};let D=[];const G=vt(null),F=vt(null);let Z,et,Oe=!1;G.subscribe(e=>{if(e){for(let t=0;t<D.length;t++)D[t]===e&&(Z=t);Oe&&(ke(),bt())}});F.subscribe(e=>{if(Oe){if(!e){ke(),console.log("edit saving"),et===Z&&bt();return}for(let t=0;t<D.length;t++)D[t]===e&&(et=t)}});function Kt(){const e=structuredClone(D[0]);e.name="",D.push(e),F.set(e),ke()}function Ut(e){D=D.filter(t=>t!==e),G.set(D[0]),F.set(null),ke()}function Gt(){D=JSON.parse(localStorage.getItem("profiles")),D||(D=[xt],G.set(D[0])),Z=parseInt(localStorage.getItem("active")),Z||(Z=0),G.set(D[Z]),Oe=!0}function ke(){localStorage.setItem("active",Z.toString()),localStorage.setItem("profiles",JSON.stringify(D))}function bt(){Telegram.WebApp.initData,D[Z]}Gt();const ht={addProfile:Kt,delProfile:Ut};function Qt(e){let t,i,o;return{c(){t=v("button"),t.textContent="Off",L(t,"class","text-red-600")},m(n,f){b(n,t,f),i||(o=M(t,"click",pt(e[3])),i=!0)},p:j,d(n){n&&g(t),i=!1,o()}}}function en(e){let t,i,o;return{c(){t=v("button"),t.textContent="On",L(t,"class","text-green-600")},m(n,f){b(n,t,f),i||(o=M(t,"click",pt(e[2])),i=!0)},p:j,d(n){n&&g(t),i=!1,o()}}}function tn(e){let t,i,o,n,f;function a(l,u){return l[0]?en:Qt}let r=a(e),s=r(e);return{c(){t=v("tr"),i=v("td"),o=x(e[1]),n=N(),f=v("td"),s.c(),L(f,"class","text-right"),L(t,"class","module")},m(l,u){b(l,t,u),$(t,i),$(i,o),$(t,n),$(t,f),s.m(f,null)},p(l,[u]){u&2&&ce(o,l[1]),r===(r=a(l))&&s?s.p(l,u):(s.d(1),s=r(l),s&&(s.c(),s.m(f,null)))},i:j,o:j,d(l){l&&g(t),s.d()}}}function nn(e,t,i){let{name:o}=t,{active:n}=t;const f=()=>i(0,n=!1),a=()=>i(0,n=!0);return e.$$set=r=>{"name"in r&&i(1,o=r.name),"active"in r&&i(0,n=r.active)},[n,o,f,a]}class we extends R{constructor(t){super(),H(this,t,nn,tn,B,{name:1,active:0})}}function tt(e){let t;return{c(){t=v("div"),_e(t,"top",e[3]+"px"),_e(t,"left",e[2]+"px"),L(t,"class","tooltip svelte-129dd45")},m(i,o){b(i,t,o),t.innerHTML=e[0]},p(i,o){o&1&&(t.innerHTML=i[0]),o&8&&_e(t,"top",i[3]+"px"),o&4&&_e(t,"left",i[2]+"px")},d(i){i&&g(t)}}}function on(e){let t,i,o,n,f,a;const r=e[8].default,s=Mt(r,e,e[7],null);let l=e[1]&&tt(e);return{c(){t=v("div"),s&&s.c(),i=N(),l&&l.c(),o=me(),_e(t,"position","relative")},m(u,c){b(u,t,c),s&&s.m(t,null),b(u,i,c),l&&l.m(u,c),b(u,o,c),n=!0,f||(a=[M(t,"mouseover",e[4]),M(t,"mouseleave",e[6]),M(t,"mousemove",e[5])],f=!0)},p(u,[c]){s&&s.p&&(!n||c&128)&&jt(s,r,u,u[7],n?It(r,u[7],c,null):Ft(u[7]),null),u[1]?l?l.p(u,c):(l=tt(u),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null)},i(u){n||(h(s,u),n=!0)},o(u){y(s,u),n=!1},d(u){u&&(g(t),g(i),g(o)),s&&s.d(u),l&&l.d(u),f=!1,V(a)}}}function ln(e,t,i){let{$$slots:o={},$$scope:n}=t,{title:f=""}=t,a=!1,r,s;function l(m){i(1,a=!0),i(2,r=m.pageX+5),i(3,s=m.pageY+5)}function u(m){i(2,r=m.pageX+5),i(3,s=m.pageY+5)}function c(){i(1,a=!1)}return e.$$set=m=>{"title"in m&&i(0,f=m.title),"$$scope"in m&&i(7,n=m.$$scope)},[f,a,r,s,l,u,c,n,o]}class Ae extends R{constructor(t){super(),H(this,t,ln,on,B,{title:0})}}function sn(e){let t,i;return{c(){t=v("span"),i=x(e[1])},m(o,n){b(o,t,n),$(t,i)},p(o,n){n&2&&ce(i,o[1])},d(o){o&&g(t)}}}function un(e){let t,i,o,n,f,a,r,s,l;return n=new Ae({props:{title:e[2],$$slots:{default:[sn]},$$scope:{ctx:e}}}),{c(){t=v("tr"),i=v("td"),o=v("div"),C(n.$$.fragment),f=N(),a=v("input"),L(a,"type","text"),L(o,"class","flex justify-between"),L(i,"colspan","2"),L(t,"class","action")},m(u,c){b(u,t,c),$(t,i),$(i,o),S(n,o,null),$(o,f),$(o,a),ae(a,e[0]),r=!0,s||(l=M(a,"input",e[3]),s=!0)},p(u,[c]){const m={};c&4&&(m.title=u[2]),c&18&&(m.$$scope={dirty:c,ctx:u}),n.$set(m),c&1&&a.value!==u[0]&&ae(a,u[0])},i(u){r||(h(n.$$.fragment,u),r=!0)},o(u){y(n.$$.fragment,u),r=!1},d(u){u&&g(t),z(n),s=!1,l()}}}function rn(e,t,i){let{name:o}=t,{value:n}=t,{tip:f}=t;function a(){n=this.value,i(0,n)}return e.$$set=r=>{"name"in r&&i(1,o=r.name),"value"in r&&i(0,n=r.value),"tip"in r&&i(2,f=r.tip)},[n,o,f,a]}class I extends R{constructor(t){super(),H(this,t,rn,un,B,{name:1,value:0,tip:2})}}function nt(e){let t,i,o,n,f,a;function r(c){e[2](c)}let s={name:"Photo",tip:"Output format for photos"};e[0].settings.photo!==void 0&&(s.value=e[0].settings.photo),t=new I({props:s}),O.push(()=>T(t,"value",r));function l(c){e[3](c)}let u={name:"Video",tip:"Output format for videos"};return e[0].settings.video!==void 0&&(u.value=e[0].settings.video),n=new I({props:u}),O.push(()=>T(n,"value",l)),{c(){C(t.$$.fragment),o=N(),C(n.$$.fragment)},m(c,m){S(t,c,m),b(c,o,m),S(n,c,m),a=!0},p(c,m){const d={};!i&&m&1&&(i=!0,d.value=c[0].settings.photo,E(()=>i=!1)),t.$set(d);const P={};!f&&m&1&&(f=!0,P.value=c[0].settings.video,E(()=>f=!1)),n.$set(P)},i(c){a||(h(t.$$.fragment,c),h(n.$$.fragment,c),a=!0)},o(c){y(t.$$.fragment,c),y(n.$$.fragment,c),a=!1},d(c){c&&g(o),z(t,c),z(n,c)}}}function fn(e){let t,i,o,n,f;function a(l){e[1](l)}let r={name:"Format"};e[0].active!==void 0&&(r.active=e[0].active),t=new we({props:r}),O.push(()=>T(t,"active",a));let s=e[0].active&&nt(e);return{c(){C(t.$$.fragment),o=N(),s&&s.c(),n=me()},m(l,u){S(t,l,u),b(l,o,u),s&&s.m(l,u),b(l,n,u),f=!0},p(l,[u]){const c={};!i&&u&1&&(i=!0,c.active=l[0].active,E(()=>i=!1)),t.$set(c),l[0].active?s?(s.p(l,u),u&1&&h(s,1)):(s=nt(l),s.c(),h(s,1),s.m(n.parentNode,n)):s&&(Q(),y(s,1,1,()=>{s=null}),ee())},i(l){f||(h(t.$$.fragment,l),h(s),f=!0)},o(l){y(t.$$.fragment,l),y(s),f=!1},d(l){l&&(g(o),g(n)),z(t,l),s&&s.d(l)}}}function an(e,t,i){let o;U(e,F,s=>i(4,o=s));let n=o.modules.Format;function f(s){e.$$.not_equal(n.active,s)&&(n.active=s,i(0,n))}function a(s){e.$$.not_equal(n.settings.photo,s)&&(n.settings.photo=s,i(0,n))}function r(s){e.$$.not_equal(n.settings.video,s)&&(n.settings.video=s,i(0,n))}return[n,f,a,r]}class cn extends R{constructor(t){super(),H(this,t,an,fn,B,{})}}function _n(e){let t,i;return{c(){t=v("span"),i=x(e[1])},m(o,n){b(o,t,n),$(t,i)},p(o,n){n&2&&ce(i,o[1])},d(o){o&&g(t)}}}function dn(e){let t,i,o,n,f,a,r,s,l;return n=new Ae({props:{title:e[2],$$slots:{default:[_n]},$$scope:{ctx:e}}}),{c(){t=v("tr"),i=v("td"),o=v("div"),C(n.$$.fragment),f=N(),a=v("input"),L(a,"type","checkbox"),L(o,"class","flex justify-between"),L(i,"colspan","2"),L(t,"class","action")},m(u,c){b(u,t,c),$(t,i),$(i,o),S(n,o,null),$(o,f),$(o,a),a.checked=e[0],r=!0,s||(l=M(a,"change",e[3]),s=!0)},p(u,[c]){const m={};c&4&&(m.title=u[2]),c&18&&(m.$$scope={dirty:c,ctx:u}),n.$set(m),c&1&&(a.checked=u[0])},i(u){r||(h(n.$$.fragment,u),r=!0)},o(u){y(n.$$.fragment,u),r=!1},d(u){u&&g(t),z(n),s=!1,l()}}}function pn(e,t,i){let{name:o}=t,{value:n}=t,{tip:f}=t;function a(){n=this.checked,i(0,n)}return e.$$set=r=>{"name"in r&&i(1,o=r.name),"value"in r&&i(0,n=r.value),"tip"in r&&i(2,f=r.tip)},[n,o,f,a]}class $t extends R{constructor(t){super(),H(this,t,pn,dn,B,{name:1,value:0,tip:2})}}function mn(e){let t,i;return{c(){t=v("span"),i=x(e[1])},m(o,n){b(o,t,n),$(t,i)},p(o,n){n&2&&ce(i,o[1])},d(o){o&&g(t)}}}function gn(e){let t,i,o,n,f,a,r,s,l;return n=new Ae({props:{title:e[2],$$slots:{default:[mn]},$$scope:{ctx:e}}}),{c(){t=v("tr"),i=v("td"),o=v("div"),C(n.$$.fragment),f=N(),a=v("input"),L(a,"type","datetime-local"),L(o,"class","flex justify-between"),L(i,"colspan","2"),L(t,"class","action")},m(u,c){b(u,t,c),$(t,i),$(i,o),S(n,o,null),$(o,f),$(o,a),ae(a,e[0]),r=!0,s||(l=M(a,"input",e[3]),s=!0)},p(u,[c]){const m={};c&4&&(m.title=u[2]),c&18&&(m.$$scope={dirty:c,ctx:u}),n.$set(m),c&1&&ae(a,u[0])},i(u){r||(h(n.$$.fragment,u),r=!0)},o(u){y(n.$$.fragment,u),r=!1},d(u){u&&g(t),z(n),s=!1,l()}}}function vn(e,t,i){let{name:o}=t,{value:n}=t,{tip:f}=t;function a(){n=this.value,i(0,n)}return e.$$set=r=>{"name"in r&&i(1,o=r.name),"value"in r&&i(0,n=r.value),"tip"in r&&i(2,f=r.tip)},[n,o,f,a]}class bn extends R{constructor(t){super(),H(this,t,vn,gn,B,{name:1,value:0,tip:2})}}function it(e){let t,i,o,n,f,a,r,s,l,u,c,m;function d(k){e[2](k)}let P={name:"Clear",tip:"Clear all metadata"};e[0].settings.clear!==void 0&&(P.value=e[0].settings.clear),t=new $t({props:P}),O.push(()=>T(t,"value",d));function w(k){e[3](k)}let p={name:"Location",tip:"Set location: <b>latitude,longitude</b>"};e[0].settings.location!==void 0&&(p.value=e[0].settings.location),n=new I({props:p}),O.push(()=>T(n,"value",w));function X(k){e[4](k)}let te={name:"Camera",tip:"Set camera model"};e[0].settings.camera!==void 0&&(te.value=e[0].settings.camera),r=new I({props:te}),O.push(()=>T(r,"value",X));function J(k){e[5](k)}let ne={name:"Time",tip:"Set create/modify time"};return e[0].settings.time!==void 0&&(ne.value=e[0].settings.time),u=new bn({props:ne}),O.push(()=>T(u,"value",J)),{c(){C(t.$$.fragment),o=N(),C(n.$$.fragment),a=N(),C(r.$$.fragment),l=N(),C(u.$$.fragment)},m(k,A){S(t,k,A),b(k,o,A),S(n,k,A),b(k,a,A),S(r,k,A),b(k,l,A),S(u,k,A),m=!0},p(k,A){const ie={};!i&&A&1&&(i=!0,ie.value=k[0].settings.clear,E(()=>i=!1)),t.$set(ie);const oe={};!f&&A&1&&(f=!0,oe.value=k[0].settings.location,E(()=>f=!1)),n.$set(oe);const W={};!s&&A&1&&(s=!0,W.value=k[0].settings.camera,E(()=>s=!1)),r.$set(W);const le={};!c&&A&1&&(c=!0,le.value=k[0].settings.time,E(()=>c=!1)),u.$set(le)},i(k){m||(h(t.$$.fragment,k),h(n.$$.fragment,k),h(r.$$.fragment,k),h(u.$$.fragment,k),m=!0)},o(k){y(t.$$.fragment,k),y(n.$$.fragment,k),y(r.$$.fragment,k),y(u.$$.fragment,k),m=!1},d(k){k&&(g(o),g(a),g(l)),z(t,k),z(n,k),z(r,k),z(u,k)}}}function hn(e){let t,i,o,n,f;function a(l){e[1](l)}let r={name:"Meta"};e[0].active!==void 0&&(r.active=e[0].active),t=new we({props:r}),O.push(()=>T(t,"active",a));let s=e[0].active&&it(e);return{c(){C(t.$$.fragment),o=N(),s&&s.c(),n=me()},m(l,u){S(t,l,u),b(l,o,u),s&&s.m(l,u),b(l,n,u),f=!0},p(l,[u]){const c={};!i&&u&1&&(i=!0,c.active=l[0].active,E(()=>i=!1)),t.$set(c),l[0].active?s?(s.p(l,u),u&1&&h(s,1)):(s=it(l),s.c(),h(s,1),s.m(n.parentNode,n)):s&&(Q(),y(s,1,1,()=>{s=null}),ee())},i(l){f||(h(t.$$.fragment,l),h(s),f=!0)},o(l){y(t.$$.fragment,l),y(s),f=!1},d(l){l&&(g(o),g(n)),z(t,l),s&&s.d(l)}}}function $n(e,t,i){let o;U(e,F,u=>i(6,o=u));let n=o.modules.Meta;function f(u){e.$$.not_equal(n.active,u)&&(n.active=u,i(0,n))}function a(u){e.$$.not_equal(n.settings.clear,u)&&(n.settings.clear=u,i(0,n))}function r(u){e.$$.not_equal(n.settings.location,u)&&(n.settings.location=u,i(0,n))}function s(u){e.$$.not_equal(n.settings.camera,u)&&(n.settings.camera=u,i(0,n))}function l(u){e.$$.not_equal(n.settings.time,u)&&(n.settings.time=u,i(0,n))}return[n,f,a,r,s,l]}class kn extends R{constructor(t){super(),H(this,t,$n,hn,B,{})}}function wn(e){let t,i,o;function n(a){e[1](a)}let f={name:"Note"};return e[0].active!==void 0&&(f.active=e[0].active),t=new we({props:f}),O.push(()=>T(t,"active",n)),{c(){C(t.$$.fragment)},m(a,r){S(t,a,r),o=!0},p(a,[r]){const s={};!i&&r&1&&(i=!0,s.active=a[0].active,E(()=>i=!1)),t.$set(s)},i(a){o||(h(t.$$.fragment,a),o=!0)},o(a){y(t.$$.fragment,a),o=!1},d(a){z(t,a)}}}function yn(e,t,i){let o;U(e,F,a=>i(2,o=a));let n=o.modules.Note;function f(a){e.$$.not_equal(n.active,a)&&(n.active=a,i(0,n))}return[n,f]}class Pn extends R{constructor(t){super(),H(this,t,yn,wn,B,{})}}function ot(e){let t,i,o,n,f,a,r,s,l,u,c,m,d,P,w,p,X,te,J,ne,k,A,ie,oe,W,le,ye,Y,Pe,ge;function kt(_){e[2](_)}let Ee={name:"Mirror",tip:"Mirror horizontally"};e[0].settings.mirror!==void 0&&(Ee.value=e[0].settings.mirror),t=new $t({props:Ee}),O.push(()=>T(t,"value",kt));function wt(_){e[3](_)}let Te={name:"Colors",tip:"Color shift [0-10]: <b>value</b> or <b>min:max</b>"};e[0].settings.colors!==void 0&&(Te.value=e[0].settings.colors),n=new I({props:Te}),O.push(()=>T(n,"value",wt));function yt(_){e[4](_)}let Le={name:"Blur",tip:"Blur [0-10]: <b>value</b> or <b>min:max</b>"};e[0].settings.blur!==void 0&&(Le.value=e[0].settings.blur),r=new I({props:Le}),O.push(()=>T(r,"value",yt));function Pt(_){e[5](_)}let De={name:"Noise",tip:"Noise [0-10]: <b>value</b> or <b>min:max</b>"};e[0].settings.noise!==void 0&&(De.value=e[0].settings.noise),u=new I({props:De}),O.push(()=>T(u,"value",Pt));function qt(_){e[6](_)}let Me={name:"Zoom",tip:"Zoom [0-10]: <b>value</b> or <b>min:max</b>"};e[0].settings.zoom!==void 0&&(Me.value=e[0].settings.zoom),d=new I({props:Me}),O.push(()=>T(d,"value",qt));function Nt(_){e[7](_)}let Ie={name:"Pan",tip:"Pan [0-width,0-height]: <b>x,y</b>"};e[0].settings.pan!==void 0&&(Ie.value=e[0].settings.pan),p=new I({props:Ie}),O.push(()=>T(p,"value",Nt));function St(_){e[8](_)}let je={name:"Rotate",tip:"Rotate [degree]: <b>value</b> or <b>min:max</b>"};e[0].settings.rotate!==void 0&&(je.value=e[0].settings.rotate),J=new I({props:je}),O.push(()=>T(J,"value",St));function zt(_){e[9](_)}let Fe={name:"Size",tip:"Size [width,height]: <b>w,h</b> or <b>min:max,min:max</b>"};e[0].settings.size!==void 0&&(Fe.value=e[0].settings.size),A=new I({props:Fe}),O.push(()=>T(A,"value",zt));function Ct(_){e[10](_)}let Be={name:"Fps",tip:"Fps [value]: <b>value</b>"};e[0].settings.fps!==void 0&&(Be.value=e[0].settings.fps),W=new I({props:Be}),O.push(()=>T(W,"value",Ct));function Ot(_){e[11](_)}let We={name:"Split",tip:"Split [length]: <b>value<b> or <b>min:max</b>"};return e[0].settings.split!==void 0&&(We.value=e[0].settings.split),Y=new I({props:We}),O.push(()=>T(Y,"value",Ot)),{c(){C(t.$$.fragment),o=N(),C(n.$$.fragment),a=N(),C(r.$$.fragment),l=N(),C(u.$$.fragment),m=N(),C(d.$$.fragment),w=N(),C(p.$$.fragment),te=N(),C(J.$$.fragment),k=N(),C(A.$$.fragment),oe=N(),C(W.$$.fragment),ye=N(),C(Y.$$.fragment)},m(_,q){S(t,_,q),b(_,o,q),S(n,_,q),b(_,a,q),S(r,_,q),b(_,l,q),S(u,_,q),b(_,m,q),S(d,_,q),b(_,w,q),S(p,_,q),b(_,te,q),S(J,_,q),b(_,k,q),S(A,_,q),b(_,oe,q),S(W,_,q),b(_,ye,q),S(Y,_,q),ge=!0},p(_,q){const He={};!i&&q&1&&(i=!0,He.value=_[0].settings.mirror,E(()=>i=!1)),t.$set(He);const Re={};!f&&q&1&&(f=!0,Re.value=_[0].settings.colors,E(()=>f=!1)),n.$set(Re);const Je={};!s&&q&1&&(s=!0,Je.value=_[0].settings.blur,E(()=>s=!1)),r.$set(Je);const Ve={};!c&&q&1&&(c=!0,Ve.value=_[0].settings.noise,E(()=>c=!1)),u.$set(Ve);const Xe={};!P&&q&1&&(P=!0,Xe.value=_[0].settings.zoom,E(()=>P=!1)),d.$set(Xe);const Ye={};!X&&q&1&&(X=!0,Ye.value=_[0].settings.pan,E(()=>X=!1)),p.$set(Ye);const Ze={};!ne&&q&1&&(ne=!0,Ze.value=_[0].settings.rotate,E(()=>ne=!1)),J.$set(Ze);const xe={};!ie&&q&1&&(ie=!0,xe.value=_[0].settings.size,E(()=>ie=!1)),A.$set(xe);const Ke={};!le&&q&1&&(le=!0,Ke.value=_[0].settings.fps,E(()=>le=!1)),W.$set(Ke);const Ue={};!Pe&&q&1&&(Pe=!0,Ue.value=_[0].settings.split,E(()=>Pe=!1)),Y.$set(Ue)},i(_){ge||(h(t.$$.fragment,_),h(n.$$.fragment,_),h(r.$$.fragment,_),h(u.$$.fragment,_),h(d.$$.fragment,_),h(p.$$.fragment,_),h(J.$$.fragment,_),h(A.$$.fragment,_),h(W.$$.fragment,_),h(Y.$$.fragment,_),ge=!0)},o(_){y(t.$$.fragment,_),y(n.$$.fragment,_),y(r.$$.fragment,_),y(u.$$.fragment,_),y(d.$$.fragment,_),y(p.$$.fragment,_),y(J.$$.fragment,_),y(A.$$.fragment,_),y(W.$$.fragment,_),y(Y.$$.fragment,_),ge=!1},d(_){_&&(g(o),g(a),g(l),g(m),g(w),g(te),g(k),g(oe),g(ye)),z(t,_),z(n,_),z(r,_),z(u,_),z(d,_),z(p,_),z(J,_),z(A,_),z(W,_),z(Y,_)}}}function qn(e){let t,i,o,n,f;function a(l){e[1](l)}let r={name:"Transform"};e[0].active!==void 0&&(r.active=e[0].active),t=new we({props:r}),O.push(()=>T(t,"active",a));let s=e[0].active&&ot(e);return{c(){C(t.$$.fragment),o=N(),s&&s.c(),n=me()},m(l,u){S(t,l,u),b(l,o,u),s&&s.m(l,u),b(l,n,u),f=!0},p(l,[u]){const c={};!i&&u&1&&(i=!0,c.active=l[0].active,E(()=>i=!1)),t.$set(c),l[0].active?s?(s.p(l,u),u&1&&h(s,1)):(s=ot(l),s.c(),h(s,1),s.m(n.parentNode,n)):s&&(Q(),y(s,1,1,()=>{s=null}),ee())},i(l){f||(h(t.$$.fragment,l),h(s),f=!0)},o(l){y(t.$$.fragment,l),y(s),f=!1},d(l){l&&(g(o),g(n)),z(t,l),s&&s.d(l)}}}function Nn(e,t,i){let o;U(e,F,p=>i(12,o=p));let n=o.modules.Transform;function f(p){e.$$.not_equal(n.active,p)&&(n.active=p,i(0,n))}function a(p){e.$$.not_equal(n.settings.mirror,p)&&(n.settings.mirror=p,i(0,n))}function r(p){e.$$.not_equal(n.settings.colors,p)&&(n.settings.colors=p,i(0,n))}function s(p){e.$$.not_equal(n.settings.blur,p)&&(n.settings.blur=p,i(0,n))}function l(p){e.$$.not_equal(n.settings.noise,p)&&(n.settings.noise=p,i(0,n))}function u(p){e.$$.not_equal(n.settings.zoom,p)&&(n.settings.zoom=p,i(0,n))}function c(p){e.$$.not_equal(n.settings.pan,p)&&(n.settings.pan=p,i(0,n))}function m(p){e.$$.not_equal(n.settings.rotate,p)&&(n.settings.rotate=p,i(0,n))}function d(p){e.$$.not_equal(n.settings.size,p)&&(n.settings.size=p,i(0,n))}function P(p){e.$$.not_equal(n.settings.fps,p)&&(n.settings.fps=p,i(0,n))}function w(p){e.$$.not_equal(n.settings.split,p)&&(n.settings.split=p,i(0,n))}return[n,f,a,r,s,l,u,c,m,d,P,w]}class Sn extends R{constructor(t){super(),H(this,t,Nn,qn,B,{})}}function lt(e,t,i){const o=e.slice();return o[13]=t[i],o}function st(e,t,i){const o=e.slice();return o[10]=t[i],o}function zn(e){let t,i,o=$e(D),n=[];for(let f=0;f<o.length;f+=1)n[f]=ut(lt(e,o,f));return{c(){t=v("table"),i=v("tbody");for(let f=0;f<n.length;f+=1)n[f].c()},m(f,a){b(f,t,a),$(t,i);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(i,null)},p(f,a){if(a&11){o=$e(D);let r;for(r=0;r<o.length;r+=1){const s=lt(f,o,r);n[r]?n[r].p(s,a):(n[r]=ut(s),n[r].c(),n[r].m(i,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=o.length}},i:j,o:j,d(f){f&&g(t),dt(n,f)}}}function Cn(e){let t,i,o,n,f,a;function r(d,P){return d[1].name==="Default"?An:On}let s=r(e),l=s(e),u=$e(e[2]),c=[];for(let d=0;d<u.length;d+=1)c[d]=rt(st(e,u,d));const m=d=>y(c[d],1,1,()=>{c[d]=null});return{c(){t=v("table"),i=v("thead"),o=v("tr"),l.c(),n=N(),f=v("tbody");for(let d=0;d<c.length;d+=1)c[d].c();L(o,"class","active-edit")},m(d,P){b(d,t,P),$(t,i),$(i,o),l.m(o,null),$(t,n),$(t,f);for(let w=0;w<c.length;w+=1)c[w]&&c[w].m(f,null);a=!0},p(d,P){if(s===(s=r(d))&&l?l.p(d,P):(l.d(1),l=s(d),l&&(l.c(),l.m(o,null))),P&4){u=$e(d[2]);let w;for(w=0;w<u.length;w+=1){const p=st(d,u,w);c[w]?(c[w].p(p,P),h(c[w],1)):(c[w]=rt(p),c[w].c(),h(c[w],1),c[w].m(f,null))}for(Q(),w=u.length;w<c.length;w+=1)m(w);ee()}},i(d){if(!a){for(let P=0;P<u.length;P+=1)h(c[P]);a=!0}},o(d){c=c.filter(Boolean);for(let P=0;P<c.length;P+=1)y(c[P]);a=!1},d(d){d&&g(t),l.d(),dt(c,d)}}}function ut(e){let t,i,o,n,f,a,r,s;function l(){return e[8](e[13])}function u(){return e[9](e[13])}return{c(){t=v("tr"),i=v("td"),i.textContent=`${e[13].name}`,o=N(),n=v("td"),f=v("button"),f.textContent="Edit",a=N(),Qe(t,"active",e[13]===e[0])},m(c,m){b(c,t,m),$(t,i),$(t,o),$(t,n),$(n,f),$(t,a),r||(s=[M(f,"click",l),M(n,"click",Dn),M(t,"click",u)],r=!0)},p(c,m){e=c,m&1&&Qe(t,"active",e[13]===e[0])},d(c){c&&g(t),r=!1,V(s)}}}function On(e){let t,i,o,n,f,a,r,s,l;return{c(){t=v("td"),i=v("input"),o=N(),n=v("td"),f=v("button"),f.textContent="Del",a=N(),r=v("button"),r.textContent="Done",L(i,"type","text"),L(f,"class","mr-2")},m(u,c){b(u,t,c),$(t,i),ae(i,e[1].name),b(u,o,c),b(u,n,c),$(n,f),$(n,a),$(n,r),s||(l=[M(i,"input",e[5]),M(f,"click",e[6]),M(r,"click",e[7]),M(n,"click",Ln)],s=!0)},p(u,c){c&2&&i.value!==u[1].name&&ae(i,u[1].name)},d(u){u&&(g(t),g(o),g(n)),s=!1,V(l)}}}function An(e){let t,i=e[1].name+"",o,n,f,a,r,s;return{c(){t=v("td"),o=x(i),n=N(),f=v("td"),a=v("button"),a.textContent="Done"},m(l,u){b(l,t,u),$(t,o),b(l,n,u),b(l,f,u),$(f,a),r||(s=[M(a,"click",e[4]),M(f,"click",Tn)],r=!0)},p(l,u){u&2&&i!==(i=l[1].name+"")&&ce(o,i)},d(l){l&&(g(t),g(n),g(f)),r=!1,V(s)}}}function rt(e){let t,i,o;var n=e[10];function f(a,r){return{}}return n&&(t=he(n,f())),{c(){t&&C(t.$$.fragment),i=me()},m(a,r){t&&S(t,a,r),b(a,i,r),o=!0},p(a,r){if(n!==(n=a[10])){if(t){Q();const s=t;y(s.$$.fragment,1,0,()=>{z(s,1)}),ee()}n?(t=he(n,f()),C(t.$$.fragment),h(t.$$.fragment,1),S(t,i.parentNode,i)):t=null}},i(a){o||(t&&h(t.$$.fragment,a),o=!0)},o(a){t&&y(t.$$.fragment,a),o=!1},d(a){a&&g(i),t&&z(t,a)}}}function En(e){let t,i,o,n;const f=[Cn,zn],a=[];function r(s,l){return s[1]?0:1}return i=r(e),o=a[i]=f[i](e),{c(){t=v("div"),o.c()},m(s,l){b(s,t,l),a[i].m(t,null),n=!0},p(s,[l]){let u=i;i=r(s),i===u?a[i].p(s,l):(Q(),y(a[u],1,1,()=>{a[u]=null}),ee(),o=a[i],o?o.p(s,l):(o=a[i]=f[i](s),o.c()),h(o,1),o.m(t,null))},i(s){n||(h(o),n=!0)},o(s){y(o),n=!1},d(s){s&&g(t),a[i].d()}}}const Tn=e=>e.stopPropagation(),Ln=e=>e.stopPropagation(),Dn=e=>e.stopPropagation();function Mn(e,t,i){let o,n;U(e,G,d=>i(0,o=d)),U(e,F,d=>i(1,n=d));const f=[cn,kn,Pn,Sn];function a(){}const r=()=>{ve(F,n=null,n)};function s(){n.name=this.value,F.set(n)}return[o,n,f,a,r,s,()=>ht.delProfile(n),()=>{ve(F,n=null,n)},d=>ve(F,n=d,n),d=>{ve(G,o=d,o)}]}class ft extends R{constructor(t){super(),H(this,t,Mn,En,B,{})}}function In(e){let t,i,o,n=e[0].name+"",f,a,r,s,l,u,c,m;var d=ft;function P(w,p){return{}}return d&&(l=he(d,P())),{c(){t=v("main"),i=v("nav"),o=v("span"),f=x(n),a=N(),r=v("button"),r.textContent="Add",s=N(),l&&C(l.$$.fragment)},m(w,p){b(w,t,p),$(t,i),$(i,o),$(o,f),$(i,a),$(i,r),$(t,s),l&&S(l,t,null),u=!0,c||(m=M(r,"click",e[1]),c=!0)},p(w,[p]){if((!u||p&1)&&n!==(n=w[0].name+"")&&ce(f,n),d!==(d=ft)){if(l){Q();const X=l;y(X.$$.fragment,1,0,()=>{z(X,1)}),ee()}d?(l=he(d,P()),C(l.$$.fragment),h(l.$$.fragment,1),S(l,t,null)):l=null}},i(w){u||(l&&h(l.$$.fragment,w),u=!0)},o(w){l&&y(l.$$.fragment,w),u=!1},d(w){w&&g(t),l&&z(l),c=!1,m()}}}function jn(e,t,i){let o;return U(e,G,f=>i(0,o=f)),Wt(()=>(window.addEventListener("close",()=>{Telegram.WebApp.sendData("test data close")}),window.addEventListener("unload",()=>{Telegram.WebApp.sendData("test data unload")}),()=>{Telegram.WebApp.sendData("test data mount")})),Ht(()=>{Telegram.WebApp.sendData("test data destroy")}),[o,()=>ht.addProfile()]}class Fn extends R{constructor(t){super(),H(this,t,jn,In,B,{})}}new Fn({target:document.getElementById("app")});
